Для хранения и работы с корзиной заказов я реализовал паттерн Стратегия,
чтобы можно было удобно переключать способы хранения — например, базой данных или API — без изменения основной бизнес-логики.

Я создал интерфейс OrderStorageStrategyInterface, в котором определён метод getRepository(). 
Этот метод возвращает репозиторий, соответствующий текущей стратегии хранения.

Затем я реализовал конкретную стратегию OrderStorageStrategy, которая возвращает, например, OrderRepository (в моём случае — работающий с базой данных):

Таким образом, стратегия инкапсулирует выбор хранилища и возвращает нужную реализацию репозитория. 
В коде сервиса, который работает с заказами, я просто использую стратегию:

Ну и ещё добавил классы Order и OrderItem, для основной работы с заказами
